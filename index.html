<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’• Hey You... ğŸ’•</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #fce4ec, #f8bbd0, #f48fb1, #fce4ec);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Floating Hearts Background */
        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            font-size: 20px;
            animation: floatUp linear infinite;
            opacity: 0.6;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(1);
                opacity: 0;
            }

            10% {
                opacity: 0.6;
            }

            90% {
                opacity: 0.6;
            }

            100% {
                transform: translateY(-10vh) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Sparkles */
        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: gold;
            border-radius: 50%;
            animation: sparkle 2s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes sparkle {

            0%,
            100% {
                opacity: 0;
                transform: scale(0);
            }

            50% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Main Card */
        .card {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 40px 50px;
            max-width: 520px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(233, 30, 99, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.5) inset;
            animation: cardEntrance 1s ease-out;
        }

        @keyframes cardEntrance {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(50px);
            }

            60% {
                transform: scale(1.05) translateY(-10px);
            }

            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .card.shake {
            animation: shake 0.6s ease-in-out;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0) rotate(0);
            }

            15% {
                transform: translateX(-10px) rotate(-2deg);
            }

            30% {
                transform: translateX(10px) rotate(2deg);
            }

            45% {
                transform: translateX(-8px) rotate(-1.5deg);
            }

            60% {
                transform: translateX(8px) rotate(1.5deg);
            }

            75% {
                transform: translateX(-4px) rotate(-0.5deg);
            }
        }

        /* Dancing Image */
        .dancing-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid #f48fb1;
            box-shadow: 0 8px 30px rgba(244, 143, 177, 0.4);
            margin: 0 auto 20px;
            display: block;
            animation: dance 1.5s ease-in-out infinite;
        }

        @keyframes dance {

            0%,
            100% {
                transform: translateY(0) rotate(-3deg) scale(1);
            }

            25% {
                transform: translateY(-15px) rotate(3deg) scale(1.05);
            }

            50% {
                transform: translateY(0) rotate(-3deg) scale(1);
            }

            75% {
                transform: translateY(-10px) rotate(5deg) scale(1.03);
            }
        }

        .title {
            font-family: 'Pacifico', cursive;
            font-size: 2.2rem;
            color: #e91e63;
            margin-bottom: 10px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .subtitle {
            font-size: 1rem;
            color: #ad1457;
            margin-bottom: 30px;
            font-weight: 600;
            opacity: 0.8;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            padding: 14px 40px;
            border: none;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-yes {
            background: linear-gradient(135deg, #ec407a, #e91e63, #c2185b);
            color: white;
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.4);
            animation: yesGlow 2s ease-in-out infinite;
        }

        @keyframes yesGlow {

            0%,
            100% {
                box-shadow: 0 6px 20px rgba(233, 30, 99, 0.4);
            }

            50% {
                box-shadow: 0 6px 35px rgba(233, 30, 99, 0.7), 0 0 60px rgba(233, 30, 99, 0.2);
            }
        }

        .btn-yes:hover {
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(233, 30, 99, 0.6);
        }

        .btn-no {
            background: linear-gradient(135deg, #e0e0e0, #bdbdbd);
            color: #757575;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
            padding: 10px 25px;
        }

        .btn-no:hover {
            transform: scale(0.85);
            opacity: 0.7;
        }

        .btn-single {
            display: block;
            margin: 20px auto 0;
        }

        /* Screen transitions */
        .screen {
            display: none;
            animation: fadeSlideIn 0.6s ease-out forwards;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeSlideIn {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Emoji big */
        .big-emoji {
            font-size: 4rem;
            display: block;
            margin: 15px auto;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .sad-img {
            width: 180px;
            height: 180px;
            object-fit: cover;
            border-radius: 20px;
            margin: 15px auto;
            display: block;
            animation: sadWiggle 2s ease-in-out infinite;
        }

        @keyframes sadWiggle {

            0%,
            100% {
                transform: rotate(0deg) scale(1);
            }

            25% {
                transform: rotate(-5deg) scale(0.95);
            }

            75% {
                transform: rotate(5deg) scale(0.95);
            }
        }

        /* Celebration */
        .celebrate-img {
            width: 250px;
            height: 250px;
            object-fit: cover;
            border-radius: 20px;
            margin: 15px auto;
            display: block;
            animation: celebrateBounce 1s ease-in-out infinite;
        }

        @keyframes celebrateBounce {

            0%,
            100% {
                transform: scale(1) rotate(0);
            }

            25% {
                transform: scale(1.1) rotate(-3deg);
            }

            50% {
                transform: scale(1.05) rotate(0);
            }

            75% {
                transform: scale(1.1) rotate(3deg);
            }
        }

        .celebrate-title {
            font-family: 'Pacifico', cursive;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #e91e63, #ff6090, #e91e63);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientText 3s ease infinite;
        }

        @keyframes gradientText {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .humor-text {
            font-size: 1.1rem;
            color: #ad1457;
            font-weight: 600;
            margin: 10px 0;
            line-height: 1.6;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }

        /* No button shrinking animation */
        .shrink {
            animation: shrinkBtn 0.5s forwards;
        }

        @keyframes shrinkBtn {
            to {
                transform: scale(0.5);
                font-size: 0.6rem;
                padding: 5px 12px;
            }
        }

        /* Growing Yes */
        .grow-yes {
            animation: growBtn 0.5s forwards;
        }

        @keyframes growBtn {
            to {
                transform: scale(1.3);
                padding: 18px 55px;
            }
        }

        /* Heart rain for celebration */
        .heart-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 99;
        }

        .rain-heart {
            position: absolute;
            top: -50px;
            animation: rainFall linear forwards;
            font-size: 28px;
        }

        @keyframes rainFall {
            0% {
                transform: translateY(-50px) rotate(0);
                opacity: 1;
            }

            100% {
                transform: translateY(110vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Music button */
        .music-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #f48fb1;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.2);
        }

        .music-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(233, 30, 99, 0.4);
        }

        /* Screen-specific cute details */
        .pookie-counter {
            font-size: 0.8rem;
            color: #e91e63;
            opacity: 0.5;
            margin-top: 15px;
        }

        .force-text {
            font-family: 'Pacifico', cursive;
            font-size: 1.5rem;
            color: #c2185b;
            margin: 10px 0;
        }
    </style>
</head>

<body>

    <!-- Floating Hearts Background -->
    <div class="hearts-bg" id="heartsBg"></div>

    <!-- Music Toggle -->
    <button class="music-btn" id="musicBtn" onclick="toggleMusic()">ğŸ”‡</button>

    <!-- Main Card -->
    <div class="card" id="mainCard">

        <!-- SCREEN 1: The Main Question -->
        <div class="screen active" id="screen1">
            <img src="dancing.png" class="dancing-img" alt="Dancing couple">
            <div class="title">Will you be my girlfriend? ğŸ’•</div>
            <div class="subtitle">I promise to be the best boyfriend ever âœ¨</div>
            <div class="btn-group">
                <button class="btn btn-yes" id="yesBtn" onclick="handleYes()">Yes! ğŸ’–</button>
                <button class="btn btn-no" id="noBtn1" onclick="handleNo(1)">No ğŸ˜…</button>
            </div>
        </div>

        <!-- SCREEN 2: First No - "Are you sure?" -->
        <div class="screen" id="screen2">
            <span class="big-emoji">ğŸ˜³</span>
            <div class="title">Wait... Are you sure?!</div>
            <p class="humor-text">You're really gonna do this to me? ğŸ’”<br>Think about it one more time...</p>
            <div class="btn-group">
                <button class="btn btn-yes grow-yes" onclick="handleYes()">Okay fine, YES! ğŸ’—</button>
                <button class="btn btn-no shrink" onclick="handleNo(2)">Still no... ğŸ˜¬</button>
            </div>
        </div>

        <!-- SCREEN 3: "Pookie please" -->
        <div class="screen" id="screen3">
            <img src="sad.png" class="sad-img" alt="Sad pookie">
            <div class="title">Pookie please... ğŸ¥º</div>
            <p class="humor-text">I made this whole page just for you!<br>Do you know how long this took? ğŸ˜­<br>My heart
                can't handle this...</p>
            <div class="btn-group">
                <button class="btn btn-yes grow-yes" onclick="handleYes()">YESSS! ğŸ’</button>
                <button class="btn btn-no shrink" style="font-size:0.7rem; padding:8px 18px;"
                    onclick="handleNo(3)">n-no... ğŸ˜°</button>
            </div>
        </div>

        <!-- SCREEN 4: "If you say no I'll be sad forever" -->
        <div class="screen" id="screen4">
            <span class="big-emoji">ğŸ˜¢</span>
            <div class="title">If you say no...</div>
            <p class="humor-text">I'll be sad FOREVER! And ever! And everrrr! ğŸ˜­<br>Is that what you want?<br>A
                permanently sad boyfriend?<br>That's cruel, pookie... ğŸ’”</p>
            <div class="btn-group">
                <button class="btn btn-yes grow-yes" style="font-size:1.3rem; padding:16px 50px;"
                    onclick="handleYes()">YES YES YES! ğŸ’</button>
                <button class="btn btn-no" style="font-size:0.55rem; padding:5px 10px; opacity:0.5;"
                    onclick="handleNo(4)">no ğŸ«£</button>
            </div>
        </div>

        <!-- SCREEN 5: "Pookieee please" Last chance before forced -->
        <div class="screen" id="screen5">
            <img src="sad.png" class="sad-img" alt="Sad pookie begging">
            <div class="title">POOKIEEE PLEASEEE ğŸ˜­ğŸ¥º</div>
            <p class="humor-text">This is your last chance...<br>After this, I'm not giving you a choice ğŸ˜¤<br>Please...
                I'll do anything! ğŸ™<br>I'll buy you food! I'll carry your bags!<br>I'll even watch your favorite show
                for the 100th time!</p>
            <div class="btn-group">
                <button class="btn btn-yes grow-yes" style="font-size:1.5rem; padding:20px 60px;"
                    onclick="handleYes()">YESSSS! ğŸ’–ğŸ’–ğŸ’–</button>
                <button class="btn btn-no" style="font-size:0.4rem; padding:3px 6px; opacity:0.3;"
                    onclick="handleNo(5)">... ğŸ˜¶</button>
            </div>
            <div class="pookie-counter">you've said no <span id="noCount">4</span> times... my heart broke <span
                    id="noCount2">4</span> times ğŸ’”</div>
        </div>

        <!-- SCREEN 6: FORCED YES -->
        <div class="screen" id="screen6">
            <span class="big-emoji">ğŸ˜¤ğŸ’•</span>
            <div class="force-text">That's it! I'm not asking anymore!</div>
            <div class="title">You ARE my girlfriend now! ğŸ’–</div>
            <p class="humor-text">No more options. No escape.<br>You're stuck with me forever! ğŸ˜‚ğŸ’•<br>Deal with it,
                pookie! ğŸ¤­</p>
            <div class="btn-group">
                <button class="btn btn-yes grow-yes" style="font-size:1.5rem; padding:22px 70px;"
                    onclick="handleYes()">Fine... YES! ğŸ˜</button>
                <button class="btn btn-yes" style="font-size:1.2rem;" onclick="handleYes()">Also YES! ğŸ¥°</button>
            </div>
        </div>

        <!-- SCREEN 7: YES Celebration -->
        <div class="screen" id="screen7">
            <img src="celebrate.png" class="celebrate-img" alt="Celebrating couple">
            <div class="celebrate-title">SHE SAID YESSSSS! ğŸ‰ğŸ’–</div>
            <p class="humor-text">
                Wait... you actually said yes?! ğŸ˜±<br>
                I totally thought you'd say no! ğŸ˜‚<br>
                I even prepared like 5 guilt-trip screens! ğŸ’€<br><br>
                But honestly... ğŸ¥º<br>
                You just made me the happiest person alive! ğŸ¥¹ğŸ’•<br>
                I promise to love you, annoy you,<br>
                steal your food, and make you laugh every day! ğŸ˜˜<br><br>
                <strong>You're my forever pookie now! ğŸ’–âœ¨</strong>
            </p>
            <span class="big-emoji">ğŸ¥°</span>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Background Music - Using Web Audio API for a cute melody -->
    <script>
        // ========== BACKGROUND HEARTS ==========
        function createFloatingHearts() {
            const container = document.getElementById('heartsBg');
            const hearts = ['ğŸ’•', 'ğŸ’—', 'ğŸ’–', 'ğŸ’', 'â¤ï¸', 'ğŸ©·', 'ğŸ¤', 'âœ¨', 'â­', 'ğŸŒ¸'];
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('span');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (6 + Math.random() * 8) + 's';
                heart.style.animationDelay = Math.random() * 10 + 's';
                heart.style.fontSize = (14 + Math.random() * 24) + 'px';
                container.appendChild(heart);
            }
        }
        createFloatingHearts();

        // ========== SPARKLES ==========
        function addSparkles() {
            const body = document.body;
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparkle.style.background = ['gold', '#ff69b4', '#fff', '#ffd700', '#ff1493'][Math.floor(Math.random() * 5)];
                body.appendChild(sparkle);
            }
        }
        addSparkles();

        // ========== MUSIC (Web Audio API cute melody) ==========
        let audioCtx = null;
        let musicPlaying = false;
        let musicInterval = null;

        function createMelody() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();

            const notes = [
                { freq: 523.25, dur: 0.3 },  // C5
                { freq: 587.33, dur: 0.3 },  // D5
                { freq: 659.25, dur: 0.3 },  // E5
                { freq: 523.25, dur: 0.3 },  // C5
                { freq: 659.25, dur: 0.3 },  // E5
                { freq: 698.46, dur: 0.3 },  // F5
                { freq: 659.25, dur: 0.6 },  // E5
                { freq: 587.33, dur: 0.3 },  // D5
                { freq: 523.25, dur: 0.3 },  // C5
                { freq: 493.88, dur: 0.3 },  // B4
                { freq: 523.25, dur: 0.3 },  // C5
                { freq: 587.33, dur: 0.3 },  // D5
                { freq: 523.25, dur: 0.6 },  // C5
                { freq: 0, dur: 0.3 },        // rest
                { freq: 659.25, dur: 0.3 },  // E5
                { freq: 698.46, dur: 0.3 },  // F5
                { freq: 783.99, dur: 0.3 },  // G5
                { freq: 783.99, dur: 0.3 },  // G5
                { freq: 698.46, dur: 0.3 },  // F5
                { freq: 659.25, dur: 0.3 },  // E5
                { freq: 523.25, dur: 0.3 },  // C5
                { freq: 587.33, dur: 0.3 },  // D5
                { freq: 659.25, dur: 0.3 },  // E5
                { freq: 587.33, dur: 0.6 },  // D5
                { freq: 523.25, dur: 0.6 },  // C5
            ];

            let time = audioCtx.currentTime;
            notes.forEach(note => {
                if (note.freq > 0) {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    osc.type = 'sine';
                    osc.frequency.value = note.freq;
                    gain.gain.setValueAtTime(0.08, time);
                    gain.gain.exponentialRampToValueAtTime(0.001, time + note.dur);
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    osc.start(time);
                    osc.stop(time + note.dur);
                }
                time += note.dur;
            });
            return time - audioCtx.currentTime;
        }

        function startMusic() {
            musicPlaying = true;
            document.getElementById('musicBtn').textContent = 'ğŸ”Š';
            const totalTime = createMelody();
            musicInterval = setInterval(() => {
                if (musicPlaying) createMelody();
            }, totalTime * 1000);
        }

        function stopMusic() {
            musicPlaying = false;
            document.getElementById('musicBtn').textContent = 'ğŸ”‡';
            if (musicInterval) clearInterval(musicInterval);
        }

        function toggleMusic() {
            if (musicPlaying) stopMusic();
            else startMusic();
        }

        // Auto-play music on first click
        let firstClick = true;
        document.addEventListener('click', () => {
            if (firstClick) {
                firstClick = false;
                if (!musicPlaying) startMusic();
            }
        }, { once: false });

        // ========== SCREEN NAVIGATION ==========
        let noCount = 0;

        function showScreen(num) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const target = document.getElementById('screen' + num);
            if (target) {
                target.classList.add('active');
                // Re-trigger animation
                target.style.animation = 'none';
                target.offsetHeight; // trigger reflow
                target.style.animation = '';
            }

            // Shake card on 'no' screens
            if (num >= 2 && num <= 6) {
                const card = document.getElementById('mainCard');
                card.classList.remove('shake');
                card.offsetHeight;
                card.classList.add('shake');
            }
        }

        function handleNo(stage) {
            noCount++;
            document.getElementById('noCount') && (document.getElementById('noCount').textContent = noCount);
            document.getElementById('noCount2') && (document.getElementById('noCount2').textContent = noCount);

            if (stage < 5) {
                showScreen(stage + 1);
            } else {
                // Force yes screen
                showScreen(6);
            }
        }

        function handleYes() {
            showScreen(7);
            startCelebration();
            // Play victory melody
            if (audioCtx) {
                stopMusic();
                setTimeout(() => playVictoryMelody(), 300);
            }
        }

        // ========== CELEBRATION ==========
        function startCelebration() {
            // Change background to celebration colors
            document.body.style.background = 'linear-gradient(135deg, #fce4ec, #f8bbd0, #fff9c4, #f48fb1, #e1bee7)';
            document.body.style.backgroundSize = '400% 400%';

            // Heart rain
            const rainContainer = document.createElement('div');
            rainContainer.className = 'heart-rain';
            document.body.appendChild(rainContainer);

            const celebHearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ‰', 'ğŸ¥³', 'âœ¨', 'ğŸŠ', 'ğŸ’', 'ğŸŒ¹', 'ğŸ€', 'ğŸ’Œ'];
            for (let i = 0; i < 60; i++) {
                setTimeout(() => {
                    const h = document.createElement('span');
                    h.className = 'rain-heart';
                    h.textContent = celebHearts[Math.floor(Math.random() * celebHearts.length)];
                    h.style.left = Math.random() * 100 + '%';
                    h.style.animationDuration = (2 + Math.random() * 3) + 's';
                    h.style.fontSize = (20 + Math.random() * 30) + 'px';
                    rainContainer.appendChild(h);
                }, i * 100);
            }

            // Confetti
            launchConfetti();

            // More sparkles
            for (let i = 0; i < 30; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                sparkle.style.width = '10px';
                sparkle.style.height = '10px';
                sparkle.style.background = ['gold', '#ff69b4', '#fff', '#ffd700', '#ff1493', '#e91e63'][Math.floor(Math.random() * 6)];
                document.body.appendChild(sparkle);
            }
        }

        // ========== CONFETTI ==========
        function launchConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const confettiPieces = [];
            const colors = ['#e91e63', '#f48fb1', '#fce4ec', '#ff6090', '#ad1457', '#ffd700', '#ff69b4', '#fff', '#f06292', '#ec407a'];

            for (let i = 0; i < 200; i++) {
                confettiPieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    w: 8 + Math.random() * 8,
                    h: 4 + Math.random() * 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speedY: 2 + Math.random() * 4,
                    speedX: -2 + Math.random() * 4,
                    rotation: Math.random() * 360,
                    rotSpeed: -3 + Math.random() * 6,
                    opacity: 0.8 + Math.random() * 0.2
                });
            }

            function animateConfetti() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let alive = false;

                confettiPieces.forEach(p => {
                    if (p.y < canvas.height + 20) {
                        alive = true;
                        p.y += p.speedY;
                        p.x += p.speedX;
                        p.rotation += p.rotSpeed;
                        p.speedX *= 0.999;

                        ctx.save();
                        ctx.translate(p.x, p.y);
                        ctx.rotate(p.rotation * Math.PI / 180);
                        ctx.globalAlpha = p.opacity;
                        ctx.fillStyle = p.color;
                        ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                        ctx.restore();
                    }
                });

                if (alive) requestAnimationFrame(animateConfetti);
            }

            animateConfetti();

            // Launch more after a delay
            setTimeout(() => {
                confettiPieces.forEach(p => {
                    p.y = Math.random() * -300;
                    p.x = Math.random() * canvas.width;
                });
                animateConfetti();
            }, 3000);
        }

        // ========== VICTORY MELODY ==========
        function playVictoryMelody() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();

            const notes = [
                { freq: 523.25, dur: 0.15 },
                { freq: 587.33, dur: 0.15 },
                { freq: 659.25, dur: 0.15 },
                { freq: 783.99, dur: 0.15 },
                { freq: 880.00, dur: 0.15 },
                { freq: 783.99, dur: 0.15 },
                { freq: 880.00, dur: 0.15 },
                { freq: 1046.50, dur: 0.5 },
                { freq: 0, dur: 0.2 },
                { freq: 880.00, dur: 0.2 },
                { freq: 1046.50, dur: 0.6 },
            ];

            let time = audioCtx.currentTime;
            notes.forEach(note => {
                if (note.freq > 0) {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    osc.type = 'triangle';
                    osc.frequency.value = note.freq;
                    gain.gain.setValueAtTime(0.12, time);
                    gain.gain.exponentialRampToValueAtTime(0.001, time + note.dur);
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    osc.start(time);
                    osc.stop(time + note.dur);
                }
                time += note.dur;
            });
        }

        // Handle window resize for confetti canvas
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>

</html>